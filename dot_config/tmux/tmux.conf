#=== TMUX SETTINGS ===================================================================== 
set -g prefix C-Space
bind-key C-Space send-prefix
bind-key r source-file ~/.config/tmux/tmux.conf \; display-message "Reloaded config"

set -g mouse off # Disable mouse support

setw -g mode-key vi # Use vi keybindings in copy mode
bind-key -T copy-mode-vi v send -X begin-selection
bind-key -T copy-mode-vi V send -X select-line
bind-key -T copy-mode-vi y send -X copy-pipe-and-cancel 'xclip -in -selection clipboard'

bind-key | split-window -h -c "#{pane_current_path}"
bind-key - split-window -v -c "#{pane_current_path}"

set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",$TERM:RGB"
set -g status-left-length 100
set -g status-position top
set -g window-status-format " #I:#W "
set -g window-status-current-format "#[fg=default,bold] #I:#W#{?window_zoomed_flag, (zoomed),*} " # Highlight the current window
set-option -s status-interval 5
set -g status-left "[#S] #[fg=default,bold]#{s|^#{HOME}|~|:pane_current_path} #(~/.config/tmux/scripts/git_branch.sh) " 

#=== PLUGINS ===========================================================================
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'

#---Continuum settings------------------------------------------------------------------
set -g @continuum-restore 'on'

#---Prefix highlight settings-----------------------------------------------------------
set -g status-right "#{prefix_highlight} "
set -g @prefix_highlight_show_copy_mode 'on'

#--- TPM settings ----------------------------------------------------------------------
# Install new plugins by running `prefix + I`
set -g @tpm-clean 'R'

# Automatically install tmux plugin manager if it doesn't already exist
if "test ! -d ~/.config/tmux/plugins/tpm" \
   "run 'git clone https://github.com/tmux-plugins/tpm ~/.config/tmux/plugins/tpm && ~/.config/tmux/plugins/tpm/bin/install_plugins'"

# Keep at the bottom of the file
run '~/.config/tmux/plugins/tpm/tpm'
